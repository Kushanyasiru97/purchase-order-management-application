<p-sidebar
  [(visible)]="visible"
  styleClass="w-[30vw] max-h-screen max-y-full p-0"
  position="right"
  [showCloseIcon]="false"
  (onHide)="onSidebarHide()"
>
  <div class="px-6 py-2">
    <h2 class="text-lg font-semibold text-[#000000]">
      {{ title }}
    </h2>
    <p class="text-sm text-[#6C7278] mt-1">{{ subtitle }}</p>
  </div>

  <form [formGroup]="poForm" class="px-6 py-4 space-y-4">
    <!-- PO Number -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        PO Number
        <span class="text-[#bb2027]">*</span>
      </label>
      <input
        type="text"
        placeholder="Enter PO number"
        formControlName="poNumber"
        [readonly]="readonly"
        class="w-full px-3 py-2 border border-gray-300 text-[#242E2C] rounded-md bg-gray-50 focus:outline-none "
        [class.cursor-not-allowed]="readonly"
        [class.border-red-500]="hasFieldError('poNumber')"
      />
      <div
        *ngIf="hasFieldError('poNumber')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("poNumber") }}
      </div>
    </div>

    <!-- PO Description -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        PO Description
        <span class="text-[#bb2027]">*</span>
      </label>
      <textarea
        placeholder="Enter PO description"
        formControlName="poDescription"
        [readonly]="readonly"
        rows="3"
        class="w-full px-3 py-2 border border-gray-300 text-[#242E2C] rounded-md bg-gray-50 focus:outline-none "
        [class.cursor-not-allowed]="readonly"
        [class.border-red-500]="hasFieldError('poDescription')"
      ></textarea>
      <div
        *ngIf="hasFieldError('poDescription')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("poDescription") }}
      </div>
    </div>

    <!-- Supplier Name -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        Supplier Name
        <span class="text-[#bb2027]">*</span>
      </label>
      <input
        type="text"
        placeholder="Enter supplier name"
        formControlName="supplier"
        [readonly]="readonly"
        class="w-full px-3 py-2 border border-gray-300 text-[#242E2C] rounded-md bg-gray-50 focus:outline-none "
        [class.cursor-not-allowed]="readonly"
        [class.border-red-500]="hasFieldError('supplier')"
      />
      <div
        *ngIf="hasFieldError('supplier')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("supplier") }}
      </div>
    </div>

    <!-- Order Date -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        Order Date
        <span class="text-[#bb2027]">*</span>
      </label>
      <div class="items-center border border-gray-300 rounded-md bg-gray-50 h-[42px]"
           [class.border-red-500]="hasFieldError('orderDate')">
        <p-calendar
          formControlName="orderDate"
          [showIcon]="true"
          placeholder="Select order date"
          dateFormat="mm/dd/yy"
          [disabled]="readonly"
          [appendTo]="'body'"
          styleClass="w-full px-3 py-2 border border-gray-300 text-[#242E2C] rounded-md bg-gray-50 focus:outline-none "
          [style]="{
            border: 'none',
            background: 'transparent',
            height: '40px'
          }"
        ></p-calendar>
      </div>
      <div
        *ngIf="hasFieldError('orderDate')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("orderDate") }}
      </div>
    </div>

    <!-- Total Amount -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        Total Amount (LKR)
        <span class="text-[#bb2027]">*</span>
      </label>
      <input
        type="text"
        placeholder="0.00"
        formControlName="totalAmount"
        [readonly]="readonly"
        class="w-full px-3 py-2 border border-gray-300 text-[#242E2C] rounded-md bg-gray-50 focus:outline-none "
        [class.cursor-not-allowed]="readonly"
        [class.border-red-500]="hasFieldError('totalAmount')"
        (blur)="formatAmountOnBlur()"
      />
      <div
        *ngIf="hasFieldError('totalAmount')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("totalAmount") }}
      </div>
    </div>

    <!-- Status -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-[#242E2C] mb-2">
        Status
        <span class="text-[#bb2027]">*</span>
      </label>
      <div class="items-center border border-gray-300 rounded-md bg-gray-50 h-[42px]"
           [class.border-red-500]="hasFieldError('status')">
        <p-dropdown
          [options]="statusOptions"
          formControlName="status"
          [showClear]="false"
          placeholder="Select status"
          [disabled]="readonly"
          styleClass="w-full border-none bg-transparent items-center"
          [style]="{
            border: 'none',
            background: 'transparent',
            height: '40px'
          }"
          optionLabel="label"
          optionValue="value"
          [appendTo]="'body'"
        ></p-dropdown>
      </div>
      <div
        *ngIf="hasFieldError('status')"
        class="text-[#bb2027] text-xs mt-1"
      >
        {{ getFieldError("status") }}
      </div>
    </div>
  </form>

  <div class="px-6 py-4 flex justify-between items-center border-t border-gray-200">
    <button
      pButton
      type="button"
      [label]="closeButtonLabel"
      icon="pi pi-angle-left"
      class="btn-secondary"
      (click)="onClose()"
    ></button>
      <button
        *ngIf="showAcceptButton"
        pButton
        type="button"
        [label]="acceptButtonLabel"
        [disabled]="!isFormValid"
        class="btn-primary font-14"
        (click)="onAccept()"
      ></button>
  </div>
</p-sidebar>